 <%- include('./partials/header.ejs', {isLoggedIn, isAdmin}) %>  <!-- checks the status of user and admin -->

<div class="flex-1 bg-gray-100 flex flex-col items-center py-8">
  <h1 class="text-3xl font-bold mb-8">Posts</h1>
  <div class="w-full max-w-4xl">
    <% posts.forEach(post => { %>
    <a href="/post/<%= post._id %>" class="block">
      <div class="bg-white shadow-md rounded-lg overflow-hidden mb-6">
        <div class="p-6">
          <h2
            class="text-xl font-semibold text-blue-700 hover:text-blue-900 mb-2"
          >
            <%= post.title %>
          </h2>
          <p class="text-gray-700 mb-4">
            <%= post.content.length > 200 ? post.content.substring(0, 200) +
            '...' : post.content %> <!-- Limits content to 200 words, adding '...' if it is more than 200 words -->
          </p>
        </div>
        <% if (private) { %>
        <div class="bg-gray-100 px-6 py-4 flex justify-between items-center">
          <div>
            <a
              href="/post/edit/<%= post._id %>"
              class="text-blue-500 hover:text-blue-700 font-medium mr-4"
              >Edit</a
            >
            <button
              class="text-red-500 hover:text-red-700 font-medium delete-btn"
              onclick="deleteRecord('<%= post._id %>')"
            >
              Delete
            </button>
          </div>
        </div>
        <% } %>
      </div>
    </a>
    <% }); %>
  </div>
</div>

<script src="/javascripts/script.js"></script>

<%- include('./partials/footer.ejs') %>
